<template>
  <div id="JobsVisualizationContent">
    <el-row :gutter="24">
      <div id="myMap" class="JobsVisualizationMap"></div>
    </el-row>
    <el-row :gutter="24" style="margin-top: 10px">
      <el-col :span="12">
        <div id="hotChart" class="hotChart"></div>
      </el-col>
      <el-col :span="12" >
        <div id="paralleChart" class="paralleChart"></div>
      </el-col>
    </el-row>
  </div>
</template>

<script>
  import {getCompaniesMap,getCompaniesHot,getCompaniesParalle} from "../api/api";
  require("echarts-wordcloud");
  require('echarts/extension/bmap/bmap');
  export default {
    name: "CompanyVisualization",
    data(){
      return{
        want_jobfunction_id: '',
        hotData: [],
        cities: [],
        paralleData: [],
      }
    },
    created(){
    },
    mounted(){
      let userInfo = this.$store.state.userInfo;
      this.want_jobfunction_id = userInfo['jobfunction'];
      if (this.want_jobfunction_id === 2){
        this.want_jobfunction_id = '';
      }
      this.getCompanyMap();
      this.getCompanyHot();
      this.getCompanyParalle();
    },
    methods:{
      getCompanyMap(){
        getCompaniesMap({
          page_size: 500
        }).then((response)=> {
          this.cities = response.data.results;
          this.drawMyMap();
        }).catch(function (error) {
          console.log(error);
        });
      },
      getCompanyHot(){
        getCompaniesHot({
          page_size: 150
        }).then((response)=> {
          this.hotData = response.data.results;
          this.drawHotChart();
        }).catch(function (error) {
          console.log(error);
        });
      },
      getCompanyParalle(){
        getCompaniesParalle({
          page_size: 10000
        }).then((response)=> {
          this.paralleData = response.data.results;
          this.drawParalleChart();
        }).catch(function (error) {
          console.log(error);
        });
      },
      drawMyMap(){
        let myChart = this.$echarts.init(document.getElementById('myMap'));
        var geoCoordMap = {
          "七台河": [131.01154459102744, 45.77630032154785],
          "万宁": [110.39943436554806, 18.800106988303387],
          "三亚": [109.51855670139908, 18.258736291747855],
          "三明": [117.64552116782143, 26.269736515991838],
          "三沙": [112.34048204137058, 16.838953334409123],
          "三门峡": [111.2065332238741, 34.778327249459984],
          "上海": [121.48053886017651, 31.235929042252014],
          "上饶": [117.94945960312224, 28.460625921851733],
          "东方": [108.65856652679174, 19.10110473128863],
          "东莞": [113.75842045787648, 23.02730841164339],
          "东营": [118.58846268606544, 37.45484732016579],
          "中卫": [105.20357090088713, 37.50570141870293],
          "中山": [121.65154739366945, 38.92451111549568],
          "临夏": [103.24954917760394, 35.60989877268906],
          "临汾": [111.52553022403073, 36.093741895419726],
          "临沂": [118.36353300501388, 35.11067124236514],
          "临沧": [100.09544042014869, 23.89046855627851],
          "临高": [109.69744301483321, 19.919474770278047],
          "丹东": [124.36154728159079, 40.00640870559368],
          "丹阳": [119.61250060471407, 32.01592027416992],
          "丽水": [119.9295730584414, 28.473278180563412],
          "丽江": [100.23246452903453, 26.860657438064884],
          "义乌": [120.08158099305928, 29.31114987541007],
          "乌兰察布": [113.13946767446333, 41.00074832767381],
          "乌海": [106.80039104999656, 39.6620063648907],
          "乌鲁木齐": [87.62443993536046, 43.830763204290484],
          "乐东": [109.18050798894576, 18.755871493854865],
          "乐山": [103.7725376036347, 29.55794071745811],
          "九江": [116.00753491163063, 29.711340559079343],
          "云浮": [112.05151269959146, 22.920911970342857],
          "五家渠": [87.54993663229611, 44.17244451890095],
          "五指山": [109.52354032070569, 18.780994100706135],
          "亳州": [115.7844632112745, 33.850642695788835],
          "仙桃": [113.46159059813357, 30.368271921724794],
          "伊春": [128.9134589181794, 47.73395443900141],
          "佛山": [113.12851219549718, 23.02775875078891],
          "佳木斯": [130.327359092573, 46.80568999085779],
          "保亭": [109.70348151429985, 18.646909955375843],
          "保定": [115.47146383768579, 38.87998776845534],
          "保山": [99.17727328581788, 25.139038793265964],
          "信阳": [114.09748283304512, 32.15301454753105],
          "儋州": [109.58745583568611, 19.527146110044196],
          "克孜勒苏柯尔克孜": [76.17430867621205, 39.72047120487073],
          "克拉玛依": [84.866221962114, 45.596624206980934],
          "六安": [116.52640966418569, 31.741450815322555],
          "六盘水": [104.8375546023468, 26.598833108257494],
          "兰州": [103.84052119633628, 36.067234693545565],
          "兴安盟": [122.04436452582519, 46.08846371321896],
          "内江": [105.06458802499718, 29.58588653832045],
          "凉山": [102.2735026809702, 27.88775230036972],
          "包头": [109.84654350721243, 40.66292878826139],
          "北京": [116.4133836971231, 39.910924547299565],
          "北海": [109.126533212566, 21.48683649576942],
          "十堰": [110.80452956069568, 32.63506185840116],
          "南京": [118.80242172124585, 32.06465288561847],
          "南充": [106.11750261487227, 30.843782508337036],
          "南宁": [108.37345082581861, 22.822606601187154],
          "南平": [118.1843695481426, 26.647772874203266],
          "南昌": [115.86458944231661, 28.68945529506072],
          "南通": [120.90159173866185, 31.98654943120089],
          "南阳": [112.53450131351325, 32.99656220465144],
          "博尔塔拉": [82.07291475827434, 44.9121964134647],
          "厦门": [118.09643549976651, 24.485406605176305],
          "双鸭山": [131.16534168078073, 46.65318589588607],
          "台州": [121.42743470427969, 28.66219405599615],
          "台湾": [121.97387097871568, 24.086956718804895],
          "合肥": [117.23344266497664, 31.826577833686887],
          "吉安": [115.00051072001253, 27.119726826070448],
          "吉林": [126.55563450495482, 43.84356783457924],
          "吐鲁番": [89.26602548864244, 42.678924820793675],
          "吕梁": [111.15044967529185, 37.524497749577115],
          "吴忠": [106.20537126663626, 38.00371291345338],
          "周口": [114.70348251482332, 33.6318288757022],
          "呼伦贝尔": [119.77237049946636, 49.21844647556481],
          "呼和浩特": [111.75550856170946, 40.84842299711348],
          "和田": [79.92021246975499, 37.11833554446567],
          "咸宁": [114.32851909026844, 29.847055947646492],
          "咸阳": [108.71542245143303, 34.335476293368586],
          "哈密": [93.52937301238876, 42.34446710455244],
          "哈尔滨": [126.54161509031663, 45.808825827952184],
          "唐山": [118.18645947203979, 39.63658372414733],
          "商丘": [115.66244933826238, 34.4202016658586],
          "商洛": [109.92441788136406, 33.87863385220776],
          "喀什地区": [75.99639055639747, 39.47609674864479],
          "嘉兴": [120.76355182586005, 30.750974830920143],
          "嘉峪关": [98.29620384300111, 39.77796014739059],
          "四平": [124.35648155715893, 43.171993571561],
          "固原": [106.24857742607188, 36.02161725801098],
          "图木舒克": [79.07561628689639, 39.87120907742499],
          "塔城": [82.98553242099001, 46.75434690418796],
          "大兴安岭": [124.15292785448057, 50.42002595502784],
          "大同": [124.81937675979314, 46.04558395131147],
          "大庆": [125.10865763402039, 46.59363317672175],
          "大理": [100.23651930044413, 25.59760490545194],
          "大连": [121.62163148459285, 38.9189536667856],
          "天水": [105.73141674566955, 34.58741188165064],
          "天津": [117.21081309155257, 39.143929903310074],
          "天门": [113.17240916632808, 30.669621830099477],
          "太仓": [121.13559529350024, 31.464599352977785],
          "太原": [112.55639149167204, 37.87698902884778],
          "威海": [122.12754097831325, 37.5164305480148],
          "娄底": [112.00150349288418, 27.703208596991583],
          "孝感": [113.92251007733665, 30.930689227018295],
          "宁德": [119.55451074542829, 26.672241711408567],
          "宁波": [121.62857249434141, 29.866033045866054],
          "安庆": [117.06360390491879, 30.53095656804304],
          "安康": [109.03560108265746, 32.69051277057377],
          "安阳": [114.39950042177432, 36.10594098401491],
          "安顺": [105.95441712388904, 26.25925237871499],
          "定安": [110.36553348340986, 19.687119947910173],
          "定西": [104.63242008306302, 35.586832926561875],
          "宜宾": [104.6494037048691, 28.75800702855183],
          "宜昌": [111.29254921035434, 30.697446484492378],
          "宜春": [114.4235636759064, 27.820856421848216],
          "宝鸡": [107.2445753670404, 34.36891564286998],
          "宣城": [118.76553424276743, 30.94660154529291],
          "宿州": [116.97054394561262, 33.65209532645213],
          "宿迁": [118.28157403570837, 33.96774971569008],
          "屯昌": [110.1085773245709, 19.35737492427829],
          "山南": [91.77867513851903, 29.243026939249226],
          "岳阳": [113.13548942422142, 29.3631782939259],
          "崇左": [107.3715202061015, 22.383117234663302],
          "巴中": [106.7515853031645, 31.872888585956545],
          "巴彦淖尔": [107.39439808372491, 40.7493594895728],
          "巴音郭楞": [83.65426222378824, 42.60861224235199],
          "常州": [119.98148471327892, 31.815795653327836],
          "常德": [111.70545217995837, 29.037749999406877],
          "常熟": [120.75949588665195, 31.65953827674108],
          "平凉": [106.67144234827796, 35.549232050463516],
          "平顶山": [113.19952856052156, 33.772050748691015],
          "广元": [105.85042318166482, 32.44161630531542],
          "广安": [106.64853115607652, 30.479768100141722],
          "广州": [113.27143134445974, 23.135336306695006],
          "庆阳": [107.6493856959542, 35.71521598356201],
          "廊坊": [116.69058173342549, 39.54336666275853],
          "延吉": [129.52052013726063, 42.91271700987995],
          "延安": [109.49658191612687, 36.59111103521779],
          "延边": [129.4773763202274, 42.91574303372181],
          "开封": [114.31459258497121, 34.80288581121172],
          "开平": [118.2686076244857, 39.67714363586181],
          "张家口": [114.89257223145165, 40.7732372026915],
          "张家港": [120.56155363871446, 31.88114053634028],
          "张家界": [110.48553254695402, 29.122815562551878],
          "张掖": [100.45641147405634, 38.932066007004934],
          "徐州": [117.29057543439453, 34.21266655011306],
          "德宏": [98.59135935611411, 24.438010702758117],
          "德州": [116.36555674397471, 37.441308454576266],
          "德阳": [104.40441936496448, 31.133115003656755],
          "忻州": [112.74062416023847, 38.42238338517772],
          "怀化": [110.00851426537254, 27.575160902978517],
          "怒江": [98.8632883813579, 25.823707417657754],
          "恩施": [109.4865502690053, 30.30103714374126],
          "惠州": [114.4235580165817, 23.116358854725593],
          "成都": [104.08153351042463, 30.655821878416408],
          "扬州": [119.41941890822997, 32.40067693609037],
          "承德": [117.96939750996681, 40.95785601233803],
          "抚州": [116.36453876864373, 27.954892253419565],
          "抚顺": [123.9643746156145, 41.88596959305694],
          "拉萨": [91.12082391546393, 29.65004027476773],
          "揭阳": [116.37851218033846, 23.555740488275585],
          "攀枝花": [101.72554117091441, 26.58803317333301],
          "文山": [104.23854382746465, 23.391944131908],
          "文昌": [110.80450870631743, 19.549062083120717],
          "新乡": [113.93360046733228, 35.3096399303368],
          "新余": [114.9235346513963, 27.823578697788587],
          "无锡": [120.31858328810601, 31.498809732685714],
          "日喀则": [88.89370303482552, 29.275657822511512],
          "日照": [119.53341540456555, 35.42283899843767],
          "昆山": [120.98745249794995, 31.390863425081864],
          "昆明": [102.85244836500482, 24.873998150044006],
          "昌吉": [87.27386462195048, 44.020126845938606],
          "昌江": [117.19057910346257, 29.27885446446956],
          "昌都": [97.17958359408598, 31.14734654932703],
          "昭通": [103.72351177196889, 27.34408386024681],
          "晋中": [112.75959475565928, 37.69283940975972],
          "晋城": [112.85857823132879, 35.49628458647257],
          "普洱": [100.97256981472799, 22.830979186010275],
          "景德镇": [117.18457644638579, 29.274247711040953],
          "曲靖": [103.80243482794681, 25.496406931543667],
          "朔州": [112.4393709396677, 39.337108370541735],
          "朝阳": [116.44955872950158, 39.926374523079886],
          "本溪": [123.69250712420832, 41.49291646055291],
          "来宾": [109.22745819590091, 23.75654676260728],
          "杨凌": [108.1006080570076, 34.259456212132754],
          "杭州": [120.21551180372168, 30.25308298169347],
          "松原": [124.83148187569292, 45.14740419341382],
          "林芝": [94.36805828713257, 29.654042176951524],
          "果洛": [100.25159197879555, 34.4771938664709],
          "枣庄": [117.33054194483897, 34.815994048435115],
          "柳州": [109.43442194634564, 24.331961386852413],
          "株洲": [113.14047079776427, 27.833567639016444],
          "桂林": [110.20354537457943, 25.242885724872647],
          "梅州": [116.12953737612247, 24.294177532206206],
          "梧州": [111.28551681182014, 23.48274528113516],
          "楚雄": [101.55247228396097, 25.03886038832341],
          "榆林": [109.74161603381395, 38.290883835484046],
          "武威": [102.64455434036918, 37.93437780815811],
          "武汉": [114.31158155473231, 30.598466736400987],
          "毕节": [105.33332337116845, 27.408562131330886],
          "永州": [111.61945505792227, 26.425864117900094],
          "汉中": [107.02943020926463, 33.073799907833795],
          "汕头": [116.68852864054833, 23.35909171772515],
          "汕尾": [115.3729242893998, 22.77873050016389],
          "江门": [113.08855619524043, 22.584603880965],
          "池州": [117.49842096159624, 30.670883790764535],
          "沈阳": [123.4559899308919, 41.720915668888956],
          "沧州": [116.84558075595014, 38.310215141107044],
          "河池": [108.09149994498661, 24.698911731272894],
          "河源": [114.70744627290641, 23.749684370959752],
          "泉州": [118.68244626680422, 24.879952330498313],
          "泰兴": [120.05859939046078, 32.17747402371212],
          "泰安": [117.0944948347959, 36.2058580448846],
          "泰州": [119.9295663378548, 32.4606750493083],
          "泸州": [105.4485240693266, 28.87766830360723],
          "洋浦经济开发区": [109.21176626378306, 19.75393236191296],
          "洛阳": [112.4594212983115, 34.62426277921943],
          "济南": [117.12639941261048, 36.65655420178723],
          "济宁": [116.59361234853988, 35.420177394529645],
          "济源": [112.60858070620743, 35.072907226846525],
          "海东": [102.1104440722824, 36.508511080941304],
          "海北": [100.90743432145598, 36.96066282412982],
          "海南": [106.89847100998414, 39.44682751508743],
          "海口": [110.32552547126409, 20.04404943925674],
          "海宁": [120.68656506738283, 30.51792376977565],
          "海西": [97.37629911601906, 37.38275046252745],
          "淄博": [118.06145253489896, 36.81908568332188],
          "淮北": [116.8045372670298, 33.96165630027632],
          "淮南": [117.00638885071616, 32.63184739905333],
          "淮安": [119.14746320322271, 33.508999838207515],
          "深圳": [114.06455183658751, 22.548456637984177],
          "清远": [113.06246832527266, 23.688230292088083],
          "温州": [120.70647689035565, 28.00108540447221],
          "渭南": [109.51658960525897, 34.50571551675255],
          "湖州": [120.09451660915789, 30.898963937294184],
          "湘潭": [112.95046418076468, 27.835702227135585],
          "湘西": [109.74557664946683, 28.317369104701186],
          "湛江": [110.36555441392824, 21.276723439012073],
          "滁州": [118.33940613596579, 32.26127087204081],
          "滨州": [117.9774040171467, 37.3881961960769],
          "漯河": [114.02342077764726, 33.5877107071022],
          "漳州": [117.65357645298785, 24.51892979117087],
          "潍坊": [119.16837791142822, 36.71265155126753],
          "潜江": [112.9054740908161, 30.40835793241892],
          "潮州": [116.62947017362819, 23.662623192615886],
          "澄迈": [110.01351091010905, 19.74434867164637],
          "澳门": [113.55751910182492, 22.204117988443336],
          "濮阳": [115.03559747034215, 35.76759302890629],
          "烟台": [121.45441541730195, 37.470038383730525],
          "焦作": [113.24854783457334, 35.22096325403899],
          "燕郊开发区": [116.82398477284586, 39.964076090641505],
          "牡丹江": [129.6395397783469, 44.55624570898632],
          "玉林": [110.1884531233724, 22.659830509953142],
          "玉树": [97.01537640110074, 32.99955565088557],
          "玉溪": [102.55356029311, 24.35771094244625],
          "珠海": [113.58255478654918, 22.27656465424921],
          "琼中": [109.84451062847003, 19.039163789180616],
          "琼海": [110.4805445259504, 19.26425401991763],
          "甘南": [102.91758468825803, 34.98913990996821],
          "甘孜": [101.96854674579022, 30.05527884351838],
          "白城": [122.8455906084976, 45.62550435999602],
          "白山": [126.42963008937573, 41.93962720532889],
          "白沙": [109.45747066911305, 19.231378733012683],
          "白银": [104.15541276065119, 36.54146356806949],
          "百色": [106.62458932565383, 23.908185934295958],
          "益阳": [112.36151595471031, 28.559711178489888],
          "盐城": [120.167544265761, 33.355100917626196],
          "盘锦": [122.07322781023007, 41.14124802295616],
          "眉山": [103.85656331579456, 30.082526119421058],
          "石嘴山": [106.3906004255049, 38.98968283991508],
          "石家庄": [114.52153190157445, 38.0483119268727],
          "石河子": [86.08688567193293, 44.31197647806301],
          "神农架": [110.69780544663317, 31.749023128852546],
          "福州": [119.30346983854001, 26.080429420698078],
          "秦皇岛": [119.60853063334328, 39.941748102377936],
          "红河州": [103.38154905257933, 23.36999624760546],
          "绍兴": [120.58547847885335, 30.0363693113069],
          "绥化": [126.97535687530133, 46.6600321798244],
          "绵阳": [104.6855618607612, 31.473663048745863],
          "聊城": [115.99158784830443, 36.46275818769411],
          "肇庆": [112.47148894063035, 23.052888771125616],
          "自贡": [104.78444884671711, 29.345584921327575],
          "舟山": [122.21355631852045, 29.99091168016034],
          "芜湖": [118.43943137653523, 31.358536655799266],
          "茂名": [110.931542579969, 21.669064031332095],
          "荆州": [112.19641397381135, 30.358989490775382],
          "荆门": [112.20639298023002, 31.041732575569622],
          "莆田": [119.0145209781265, 25.45986545592271],
          "莱芜": [117.68466691247161, 36.23365413364694],
          "菏泽": [115.48754503343376, 35.23940742476551],
          "萍乡": [113.8614964337543, 27.6283927093972],
          "营口": [122.24157466449694, 40.67313683826707],
          "葫芦岛": [120.8433983399283, 40.71736443636189],
          "蚌埠": [117.39551332813694, 32.921523704350825],
          "衡水": [115.6754061376161, 37.745191408077424],
          "衡阳": [112.57844721325992, 26.899576139189122],
          "衢州": [118.86659674035565, 28.975545802265025],
          "襄阳": [112.25009284837394, 32.22916859153757],
          "西双版纳": [100.80344682455637, 22.013601254764165],
          "西宁": [101.78445017050855, 36.62338469651661],
          "西安": [125.15537330312809, 42.933308420624584],
          "西昌": [102.27148382916775, 27.900580896263623],
          "许昌": [113.85847553685502, 34.04143161161871],
          "贵港": [109.60552031033306, 23.117448382037534],
          "贵阳": [106.63657676352776, 26.653324822309752],
          "贺州": [111.57352631416218, 24.409450902865487],
          "资阳": [112.33043548238085, 28.59723454973666],
          "赣州": [114.9405033729825, 25.835176103497655],
          "赤峰": [118.8955203975195, 42.2616861034116],
          "辽源": [125.15042516688747, 42.89405500574631],
          "辽阳": [123.24336640651318, 41.27416129045421],
          "达州": [107.47459385897544, 31.214307723927455],
          "运城": [111.01338945447925, 35.03270691290923],
          "连云港": [119.22862133316607, 34.60224952526725],
          "迪庆": [99.70952999013957, 27.82518468364326],
          "通化": [125.94660627598029, 41.733815801613424],
          "通辽": [122.25052178737633, 43.657980083916655],
          "遂宁": [105.5994215306444, 30.53909767110912],
          "遵义": [106.93342774801829, 27.731700878916666],
          "邓州": [112.09342010302309, 32.69391743997009],
          "邢台": [114.51146225612979, 37.07668595096609],
          "那曲": [92.0573384981749, 31.482438388454657],
          "邯郸": [114.5456282282352, 36.631262731204046],
          "邵阳": [111.474432885931, 27.245270272808565],
          "郑州": [113.63141920733915, 34.75343885045448],
          "郴州": [113.02146049909462, 25.776683273601865],
          "鄂尔多斯": [109.78744317923602, 39.61448231394889],
          "鄂州": [114.90160738827099, 30.39657217331699],
          "酒泉": [98.50068521606795, 39.73846908071564],
          "重庆": [106.55843415537664, 29.568996245338923],
          "金华": [119.65343619052916, 29.084639385513697],
          "金昌": [102.19460568669837, 38.52582009209263],
          "钦州": [108.66058016842224, 21.986593539484296],
          "铁岭": [123.73236520917769, 42.22994799718447],
          "铜仁": [109.16855802826001, 27.674902690624183],
          "铜川": [108.95240424835922, 34.902637080502906],
          "铜陵": [117.81847679445747, 30.95123323991339],
          "银川": [106.23849358740017, 38.492460055509596],
          "锡林郭勒盟": [116.05439144074573, 43.93942266533856],
          "锦州": [121.13259630055518, 41.10093149946208],
          "镇江": [119.43048944567383, 32.19471592052375],
          "长春": [125.3306020759069, 43.82195350104314],
          "长沙": [112.94547319535287, 28.23488939994364],
          "长治": [113.12255886984902, 36.2012683721548],
          "阜新": [121.67640799865809, 42.02802190131842],
          "阜阳": [115.82043612491321, 32.89606099485221],
          "防城港": [108.360418838298, 21.6930052899694],
          "阳江": [111.98848929181268, 21.864339726138933],
          "阳泉": [113.58761666287546, 37.862360847859385],
          "阿克苏": [80.26992675733364, 41.17385992695259],
          "阿勒泰": [88.13922656402383, 47.83275264847511],
          "阿坝": [102.23141546175019, 31.905511577266523],
          "阿拉善盟": [105.73537746449358, 38.858275883056955],
          "阿拉尔": [81.28735422539545, 40.55326389470602],
          "阿里": [80.11277692192645, 32.50686601763335],
          "陇南": [104.92857497071192, 33.40662022995126],
          "陵水": [110.04446409254778, 18.512331595698807],
          "随州": [113.38945001822157, 31.6965167723283],
          "雄安新区": [116.85743767003744, 40.381413791933404],
          "雅安": [103.04954262360451, 30.01679254570607],
          "青岛": [120.38945519114627, 36.072227496663224],
          "靖江": [120.28353203592053, 31.988170075210594],
          "鞍山": [123.00137251399407, 41.11505359694933],
          "韶关": [113.60352734562261, 24.815881278583017],
          "香港": [114.18612410257077, 22.29358599327966],
          "马鞍山": [118.5135795794315, 31.676265597609103],
          "驻马店": [114.02847078173271, 33.01784241674367],
          "鸡西": [130.97561865876668, 45.300872317823895],
          "鹤壁": [114.30359364247649, 35.7523574114],
          "鹤岗": [130.3044328986694, 47.35605615768509],
          "鹰潭": [117.0755754270272, 28.265787063191418],
          "黄冈": [114.87849048410779, 30.4593588576181],
          "黄南": [102.02242827807585, 35.525804586515534],
          "黄山": [118.14760982483591, 30.27865098018807],
          "黄石": [115.04553290894361, 30.205207848941598],
          "黑河": [127.53548988621854, 50.25127231175015],
          "黔东南": [107.9894462407788, 26.58970296982603],
          "黔南": [107.5284027057371, 26.260616196073833],
          "黔西南": [104.91249214626991, 25.09396734941651],
          "齐齐哈尔": [123.92457086841536, 47.3599771860153],
          "龙岩": [117.02344756677536, 25.081219844871676]
        };
        let results = [];
        for( let city of this.cities){
          var geoCoord = geoCoordMap[city['city_name']];
          if (geoCoord) {
            results.push({
              name: city['city_name'],
              value: geoCoord.concat(city['count'])
            });
          }
        }
        let option = {
          backgroundColor: '#404a59',
          animation: true,
          animationDuration: 1000,
          animationEasing: 'cubicInOut',
          animationDurationUpdate: 1000,
          animationEasingUpdate: 'cubicInOut',
          title: [
            {
              text: '全国企业分布',
              left: 'center',
              textStyle: {
                color: '#fff'
              }
            },
            {
              id: 'statistic',
              right: 120,
              top: 40,
              width: 100,
              textStyle: {
                color: '#fff',
                fontSize: 16
              }
            }
          ],
          toolbox: {
            iconStyle: {
              normal: {
                borderColor: '#fff'
              },
              emphasis: {
                borderColor: '#b1e4ff'
              }
            }
          },
          brush: {
            outOfBrush: {
              color: '#abc'
            },
            brushStyle: {
              borderWidth: 2,
              color: 'rgba(0,0,0,0.2)',
              borderColor: 'rgba(0,0,0,0.5)',
            },
            seriesIndex: [0, 1],
            throttleType: 'debounce',
            throttleDelay: 300,
            geoIndex: 0
          },
          geo: {
            map: 'china',
            left: '10',
            right: '35%',
            center: [117.98561551896913, 31.205000490896193],
            zoom: 0.6,
            label: {
              emphasis: {
                show: false
              }
            },
            roam: true,
            itemStyle: {
              normal: {
                areaColor: '#323c48',
                borderColor: '#111'
              },
              emphasis: {
                areaColor: '#2a333d'
              }
            }
          },
          tooltip : {
            trigger: 'item'
          },
          grid: {
            containLabel: true,
            right: 40,
            top: 100,
            bottom: 40,
            width: '30%'
          },
          xAxis: {
            type: 'value',
            scale: true,
            position: 'top',
            boundaryGap: false,
            splitLine: {show: false},
            axisLine: {show: false},
            axisTick: {show: false},
            axisLabel: {margin: 2, textStyle: {color: '#aaa'}},
          },
          yAxis: {
            type: 'category',
            name: 'TOP 5',
            nameGap: 13,
            axisLine: {show: false, lineStyle: {color: '#ddd'}},
            axisTick: {show: false, lineStyle: {color: '#ddd'}},
            axisLabel: {interval: 0, textStyle: {color: '#ddd'}},
            data: []
          },
          series : [
            {
              name: 'pm2.5',
              type: 'scatter',
              coordinateSystem: 'geo',
              data: results,
              symbolSize: function (val) {
                return Math.log2(val[2]);
              },
              color: '#f4e925',
              label: {
                normal: {
                  formatter: '{b}',
                  position: 'right',
                  show: false
                },
                emphasis: {
                  show: true
                }
              },
              itemStyle: {
                normal: {
                  color: '#ddb926'
                }
              }
            },
            {
              name: 'Top 5',
              type: 'effectScatter',
              coordinateSystem: 'geo',
              data: results.slice(0,6),
              symbolSize: function (val) {
                return Math.log2(val[2]);
              },
              showEffectOn: 'emphasis',
              rippleEffect: {
                brushType: 'stroke'
              },
              hoverAnimation: true,
              label: {
                normal: {
                  formatter: '{b}',
                  position: 'right',
                  show: true
                }
              },
              itemStyle: {
                normal: {
                  color: '#f4e925',
                  shadowBlur: 10,
                  shadowColor: '#333'
                }
              },
              zlevel: 1
            },
            {
              id: 'bar',
              zlevel: 2,
              type: 'bar',
              symbol: 'none',
              itemStyle: {
                normal: {
                  color: '#ddb926'
                }
              },
              data: []
            }
          ]
        };
        myChart.setOption(option);
        myChart.on('brushselected', renderBrushed);
        setTimeout(function () {
          myChart.dispatchAction({
            type: 'brush',
            areas: [
              {
                geoIndex: 0,

                // brushType: 'polygon',
                // coordRange: [[119.72,34.85],[119.68,34.85],[119.5,34.84],[119.19,34.77],[118.76,34.63],[118.6,34.6],[118.46,34.6],[118.33,34.57],[118.05,34.56],[117.6,34.56],[117.41,34.56],[117.25,34.56],[117.11,34.56],[117.02,34.56],[117,34.56],[116.94,34.56],[116.94,34.55],[116.9,34.5],[116.88,34.44],[116.88,34.37],[116.88,34.33],[116.88,34.24],[116.92,34.15],[116.98,34.09],[117.05,34.06],[117.19,33.96],[117.29,33.9],[117.43,33.8],[117.49,33.75],[117.54,33.68],[117.6,33.65],[117.62,33.61],[117.64,33.59],[117.68,33.58],[117.7,33.52],[117.74,33.5],[117.74,33.46],[117.8,33.44],[117.82,33.41],[117.86,33.37],[117.9,33.3],[117.9,33.28],[117.9,33.27],[118.09,32.97],[118.21,32.7],[118.29,32.56],[118.31,32.5],[118.35,32.46],[118.35,32.42],[118.35,32.36],[118.35,32.34],[118.37,32.24],[118.37,32.14],[118.37,32.09],[118.44,32.05],[118.46,32.01],[118.54,31.98],[118.6,31.93],[118.68,31.86],[118.72,31.8],[118.74,31.78],[118.76,31.74],[118.78,31.7],[118.82,31.64],[118.82,31.62],[118.86,31.58],[118.86,31.55],[118.88,31.54],[118.88,31.52],[118.9,31.51],[118.91,31.48],[118.93,31.43],[118.95,31.4],[118.97,31.39],[118.97,31.37],[118.97,31.34],[118.97,31.27],[118.97,31.21],[118.97,31.17],[118.97,31.12],[118.97,31.02],[118.97,30.93],[118.97,30.87],[118.97,30.85],[118.95,30.8],[118.95,30.77],[118.95,30.76],[118.93,30.7],[118.91,30.63],[118.91,30.61],[118.91,30.6],[118.9,30.6],[118.88,30.54],[118.88,30.51],[118.86,30.51],[118.86,30.46],[118.72,30.18],[118.68,30.1],[118.66,30.07],[118.62,29.91],[118.56,29.73],[118.52,29.63],[118.48,29.51],[118.44,29.42],[118.44,29.32],[118.43,29.19],[118.43,29.14],[118.43,29.08],[118.44,29.05],[118.46,29.05],[118.6,28.95],[118.64,28.94],[119.07,28.51],[119.25,28.41],[119.36,28.28],[119.46,28.19],[119.54,28.13],[119.66,28.03],[119.78,28],[119.87,27.94],[120.03,27.86],[120.17,27.79],[120.23,27.76],[120.3,27.72],[120.42,27.66],[120.52,27.64],[120.58,27.63],[120.64,27.63],[120.77,27.63],[120.89,27.61],[120.97,27.6],[121.07,27.59],[121.15,27.59],[121.28,27.59],[121.38,27.61],[121.56,27.73],[121.73,27.89],[122.03,28.2],[122.3,28.5],[122.46,28.72],[122.5,28.77],[122.54,28.82],[122.56,28.82],[122.58,28.85],[122.6,28.86],[122.61,28.91],[122.71,29.02],[122.73,29.08],[122.93,29.44],[122.99,29.54],[123.03,29.66],[123.05,29.73],[123.16,29.92],[123.24,30.02],[123.28,30.13],[123.32,30.29],[123.36,30.36],[123.36,30.55],[123.36,30.74],[123.36,31.05],[123.36,31.14],[123.36,31.26],[123.38,31.42],[123.46,31.74],[123.48,31.83],[123.48,31.95],[123.46,32.09],[123.34,32.25],[123.22,32.39],[123.12,32.46],[123.07,32.48],[123.05,32.49],[122.97,32.53],[122.91,32.59],[122.83,32.81],[122.77,32.87],[122.71,32.9],[122.56,32.97],[122.38,33.05],[122.3,33.12],[122.26,33.15],[122.22,33.21],[122.22,33.3],[122.22,33.39],[122.18,33.44],[122.07,33.56],[121.99,33.69],[121.89,33.78],[121.69,34.02],[121.66,34.05],[121.64,34.08]]
                brushType: 'rect',
                coordRange:[[0,200],[0,200]]
              }
            ]
          });
        }, 0);
        function renderBrushed(params) {
          var mainSeries = params.batch[0].selected[0];
          var selectedItems = [];
          var categoryData = [];
          var barData = [];
          var maxBar = 13;
          var sum = 0;
          var count = 0;

          for (var i = 0; i < mainSeries.dataIndex.length; i++) {
            var rawIndex = mainSeries.dataIndex[i];
            var dataItem = results[rawIndex];
            var pmValue = dataItem.value[2];
            sum += pmValue;
            count++;
            selectedItems.push(dataItem);
          }

          selectedItems.sort(function (a, b) {
            return b.value[2] - a.value[2];
          });

          for (var i = Math.min(selectedItems.length, maxBar)-1; i >=0; i--) {
            categoryData.push(selectedItems[i].name);
            barData.push(selectedItems[i].value[2]);
          }

          this.setOption({
            yAxis: {
              data: categoryData
            },
            xAxis: {
              axisLabel: {show: !!count}
            },
            title: {
              id: 'statistic',
              text: count ? '平均: ' + (sum / count).toFixed(4) : ''
            },
            series: {
              id: 'bar',
              data: barData
            }
          });
        }
      },
      drawHotChart(){
        let myChart = this.$echarts.init(document.getElementById("hotChart"));
        var industries = [
          "计算机/互联网/通信/电子",
          "会计/金融/银行/保险",
          "贸易/消费/制造/营运",
          "制药/医疗",
          "广告/媒体",
          "房地产/建筑",
          "专业服务/教育/培训",
          "服务业",
          "物流/运输",
          "能源/原材料",
          "政府/非营利组织/其他"
        ];
        var qualities = [
          "无",
          "外资（欧美）",
          "外资（非欧美）",
          "合资",
          "国企",
          "民营公司",
          "外企代表处",
          "政府机关",
          "事业单位",
          "创业公司",
          "上市公司"
        ];

        var data = [];
        for( let hot of this.hotData){
          data.push([hot['industries']-3,hot['quality']-1,hot['count']]);
        }
        data = data.map(function (item) {
          return [item[1],item[0],item[2] || '-'];
        });
        var option = {
          title:{
            text:'行业与性质与企业的关系'
          },
          tooltip: {
            position: 'top'
          },
          animation: false,
          grid: {
            containLabel: true,
            height: '50%',
            y: '10%'
          },
          xAxis: {
            type: 'category',
            data: industries,
            //设置字体倾斜
            axisLabel:{
              interval:0,
              rotate:45,
              margin:2,
              textStyle:{
                // fontWeight:"bolder",
                // color:"#000000"
              }
            },
            splitArea: {
              show: true
            }
          },
          yAxis: {
            type: 'category',
            data: qualities,
            splitArea: {
              show: true
            }
          },
          visualMap: {
            min: 0,
            max: 4000,
            calculable: true,
            orient: 'horizontal',
            left: 'center',
            bottom: '10%'
          },
          series: [{
            name: 'Punch Card',
            type: 'heatmap',
            data: data,
            label: {
              normal: {
                show: true
              }
            },
            itemStyle: {
              emphasis: {
                shadowBlur: 10,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            }
          }]
        };
        myChart.setOption(option);
      },
      drawParalleChart(){
        let myChart = this.$echarts.init(document.getElementById("paralleChart"));
        var data = [
          [], [], [], [], [],[], [], [], [], [],
          [], [], [], [], [],[], [], [], [], [],
          [], [], [], [], [],[], [], [], [], [],
          [], [], [], [], [],
        ];
        for( let paralle of this.paralleData){
          data[paralle['p']].push([paralle['p']-1,paralle['s']-1,paralle['q']-1,paralle['i']-2]);
        }
        var schema = [
          {name: 'date', index: 0, text: '省份'},
          {name: 'AQIindex', index: 0, text: '规模'},
          {name: 'PM25', index: 2, text: '性质'},
          {name: 'PM10', index: 3, text: '行业'},
        ];

        var lineStyle = {
          normal: {
            width: 1,
            opacity: 0.5
          }
        };

        var option = {
          title:{
            text:'多因素与企业的关系'
          },
          // backgroundColor: '#333',
          parallelAxis: [
            {
              dim: 0,
              name: schema[0].text,
              inverse: true,
              type: 'category',
              nameLocation: 'start',
              data: ['无','北京', '上海', '广东省', '深圳', '天津','重庆','江苏省',
                '浙江省','四川省', '海南省', '福建省', '山东省', '江西省','广西','安徽省',
                '河北省','河南省', '湖北省', '湖南省', '陕西省', '山西省','黑龙江省','辽宁省',
                '吉林省','吉林省', '云南省', '贵州省', '甘肃省', '内蒙古','宁夏','西藏',
                '新疆','青海省', '香港', '澳门', '台湾'],
              axisTick :{interval:1},
            },
            {
              dim: 1,
              name: schema[1].text,
              type: 'category',
              data: ['无','少于50人', '50-150人', '150-500人', '500-1000人', '1000-5000人','5000-10000人','10000人以上'],
              axisTick :{interval:1},
            },
            {
              dim: 2,
              name: schema[2].text,
              type: 'category',
              data: ['无','外资（欧美）', '外资（非欧美）', '合资', '国企',
                '民营公司','外企代表处','政府机关','事业单位','创业公司','上市公司'],
              axisTick :{interval:1},
            },
            {
              dim: 3,
              name: schema[3].text,
              type: 'category',
              data: ['无','计算机/互联网/通信/电子', '会计/金融/银行/保险', '贸易/消费/制造/营运', '制药/医疗',
                '广告/媒体','房地产/建筑','专业服务/教育/培训','服务业','物流/运输','能源/原材料','政府/非营利组织/其他'],
              axisTick :{interval:1},
            },
          ],
          visualMap: {
            // show: true,
            min: 0,
            max: 11,
            dimension: 2,
            inRange: {
              color: ['#F5ECA4','#C0454D'],
            },
            calculable: true,
            orient: 'horizontal',
            left: 'center',
            bottom: '10%'
          },

          parallel: {
            left: '5%',
            right: '18%',
            bottom: 100,
            parallelAxisDefault: {
              type: 'value',
              name: 'AQI指数',
              nameLocation: 'end',
              nameGap: 20,
              nameTextStyle: {
                color: '#515151',
                fontSize: 12
              },
              axisLine: {
                lineStyle: {
                  color: '#515151'
                }
              },
              axisTick: {
                lineStyle: {
                  color: '#515151'
                }
              },
              splitLine: {
                show: false
              },
              axisLabel: {
                textStyle: {
                  color: '#515151'
                }
              }
            }
          },
          series: [
            {
              name: '北京',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[0]
            },
            {
              name: '上海',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[1]
            },{
              name: '广东省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[2]
            },
            {
              name: '深圳',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[3]
            },
            {
              name: '天津',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[4]
            },
            {
              name: '重庆',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[5]
            },
            {
              name: '江苏省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[6]
            },
            {
              name: '浙江省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[7]
            },
            {
              name: '四川省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[8]
            },
            {
              name: '海南省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[9]
            },
            {
              name: '福建省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[10]
            },
            {
              name: '山东省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[11]
            },
            {
              name: '江西省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[12]
            },
            {
              name: '广西',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[13]
            },
            {
              name: '安徽省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[14]
            },
            {
              name: '河北省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[15]
            },
            {
              name: '河南省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[16]
            },
            {
              name: '湖北省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[17]
            },
            {
              name: '湖南省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[18]
            },
            {
              name: '陕西省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[19]
            },
            {
              name: '山西省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[20]
            },
            {
              name: '黑龙江省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[21]
            },
            {
              name: '辽宁',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[22]
            },
            {
              name: '吉林省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[23]
            },
            {
              name: '云南省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[24]
            },
            {
              name: '贵州省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[25]
            },
            {
              name: '甘肃省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[26]
            },
            {
              name: '内蒙古',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[27]
            },
            {
              name: '宁夏',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[28]
            },
            {
              name: '西藏',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[29]
            },
            {
              name: '新疆',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[30]
            },
            {
              name: '青海省',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[31]
            },
            {
              name: '香港',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[32]
            },
            {
              name: '澳门',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[33]
            },
            {
              name: '台湾',
              type: 'parallel',
              lineStyle: lineStyle,
              data: data[34]
            }
          ]
        };
        myChart.setOption(option);
      },
    }
  }
</script>

<style scoped>
  #JobsVisualizationContent{
    width: 100%;
    height: 100%;
    /*background: oldlace;*/
    margin-top:10px;
  }
  .JobsVisualizationMap{
    height: 300px;
    background: oldlace;
  }
  .hotChart{
    height: 500px;
    /*background: oldlace;*/
  }
  .paralleChart{
    height: 500px;
  }
  .educationBar{
    height: 250px;
  }
</style>

